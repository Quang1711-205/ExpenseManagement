<?xml version="1.0" encoding="utf-8"?>
<!-- 💰 activity_add_money_to_goal.xml - Layout thêm tiền vào mục tiêu -->

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F5F5">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <!-- Header -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="56dp"
            android:background="#4CAF50"
            android:gravity="center_vertical"
            android:orientation="horizontal"
            android:paddingHorizontal="16dp">

            <ImageView
                android:id="@+id/btnBack"
                android:layout_width="24dp"
                android:layout_height="24dp"
                android:src="@drawable/ic_arrow_back"
                android:background="?attr/selectableItemBackgroundBorderless"
                android:padding="4dp"
                app:tint="@android:color/white" />

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_marginStart="16dp"
                android:text="💰 Thêm tiền vào mục tiêu"
                android:textColor="@android:color/white"
                android:textSize="18sp"
                android:textStyle="bold" />

        </LinearLayout>

        <!-- Content -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="16dp">

            <!-- Goal Selection -->
            <androidx.cardview.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                app:cardCornerRadius="12dp"
                app:cardElevation="4dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="🎯 Chọn mục tiêu"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="#333"
                        android:layout_marginBottom="12dp" />

                    <!-- Goal Selection Container -->
                    <LinearLayout
                        android:id="@+id/layoutGoalSelection"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginBottom="8dp" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="💡 Chọn mục tiêu bạn muốn thêm tiền"
                        android:textSize="12sp"
                        android:textColor="#666" />

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Selected Goal Progress -->
            <androidx.cardview.widget.CardView
                android:id="@+id/cardSelectedGoal"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                app:cardCornerRadius="12dp"
                app:cardElevation="4dp"
                app:cardBackgroundColor="#E3F2FD"
                android:visibility="visible">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:id="@+id/tvSelectedGoalIcon"
                            android:layout_width="32dp"
                            android:layout_height="32dp"
                            android:text="🎯"
                            android:textSize="20sp"
                            android:gravity="center"
                            android:background="@drawable/circle_background"
                            android:backgroundTint="@android:color/white" />

                        <TextView
                            android:id="@+id/tvSelectedGoal"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:layout_marginStart="12dp"
                            android:text="Mua xe máy Honda"
                            android:textSize="16sp"
                            android:textStyle="bold"
                            android:textColor="#1976D2" />

                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="💰 Hiện tại:"
                            android:textSize="14sp"
                            android:textColor="#666" />

                        <TextView
                            android:id="@+id/tvCurrentAmount"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="25,000,000 đ"
                            android:textSize="14sp"
                            android:textStyle="bold"
                            android:textColor="#1976D2" />

                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="🎯 Mục tiêu:"
                            android:textSize="14sp"
                            android:textColor="#666" />

                        <TextView
                            android:id="@+id/tvTargetAmount"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="50,000,000 đ"
                            android:textSize="14sp"
                            android:textStyle="bold"
                            android:textColor="#333" />

                    </LinearLayout>

                    <TextView
                        android:id="@+id/tvGoalProgress"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="25,000,000 / 50,000,000 đ"
                        android:textSize="14sp"
                        android:textColor="#666"
                        android:layout_marginBottom="8dp" />

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:layout_marginBottom="12dp">

                        <ProgressBar
                            android:id="@+id/progressBarGoal"
                            style="?android:attr/progressBarStyleHorizontal"
                            android:layout_width="0dp"
                            android:layout_height="8dp"
                            android:layout_weight="1"
                            android:progress="50"
                            android:max="100"
                            android:progressTint="#1976D2"
                            android:progressBackgroundTint="#E0E0E0" />

                        <TextView
                            android:id="@+id/tvCurrentProgress"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginStart="12dp"
                            android:text="50%"
                            android:textSize="12sp"
                            android:textStyle="bold"
                            android:textColor="#1976D2" />

                    </LinearLayout>

                    <TextView
                        android:id="@+id/tvRemainingDays"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="⏰ Còn 180 ngày để hoàn thành"
                        android:textSize="12sp"
                        android:textColor="#666" />

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Amount Input -->
            <androidx.cardview.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                app:cardCornerRadius="12dp"
                app:cardElevation="4dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="💵 Số tiền thêm vào"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="#333"
                        android:layout_marginBottom="8dp" />

                    <EditText
                        android:id="@+id/etAmount"
                        android:layout_width="match_parent"
                        android:layout_height="48dp"
                        android:background="@drawable/edit_text_background"
                        android:hint="Nhập số tiền..."
                        android:paddingHorizontal="16dp"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:inputType="numberDecimal"
                        android:layout_marginBottom="12dp" />

                    <!-- Quick Amount Buttons -->
                    <LinearLayout
                        android:id="@+id/layoutQuickAmounts"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal">

                        <Button
                            android:id="@+id/btn100K"
                            android:layout_width="0dp"
                            android:layout_height="36dp"
                            android:layout_weight="1"
                            android:layout_margin="2dp"
                            android:text="100K"
                            android:textSize="12sp"
                            android:background="@drawable/button_outline"
                            android:textColor="@color/primary" />

                        <Button
                            android:id="@+id/btn500K"
                            android:layout_width="0dp"
                            android:layout_height="36dp"
                            android:layout_weight="1"
                            android:layout_margin="2dp"
                            android:text="500K"
                            android:textSize="12sp"
                            android:background="@drawable/button_outline"
                            android:textColor="@color/primary" />

                        <Button
                            android:id="@+id/btn1M"
                            android:layout_width="0dp"
                            android:layout_height="36dp"
                            android:layout_weight="1"
                            android:layout_margin="2dp"
                            android:text="1M"
                            android:textSize="12sp"
                            android:background="@drawable/button_outline"
                            android:textColor="@color/primary" />

                        <Button
                            android:id="@+id/btnClear"
                            android:layout_width="0dp"
                            android:layout_height="36dp"
                            android:layout_weight="1"
                            android:layout_margin="2dp"
                            android:text="Xóa"
                            android:textSize="12sp"
                            android:background="@drawable/button_outline"
                            android:textColor="#E74C3C" />

                    </LinearLayout>

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Hiển thị số dư hiện tại -->
            <androidx.cardview.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                app:cardCornerRadius="12dp"
                app:cardElevation="4dp"
                app:cardBackgroundColor="#FFF8E1">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="💳 Thông tin số dư"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="#FF8F00"
                        android:layout_marginBottom="8dp" />

                    <TextView
                        android:id="@+id/tvCurrentBalance"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Số dư hiện tại: 15,500,000 đ"
                        android:textSize="14sp"
                        android:textStyle="bold"
                        android:gravity="center"
                        android:textColor="#4CAF50"
                        android:layout_marginBottom="4dp" />

                    <TextView
                        android:id="@+id/tvBalanceAfterTransaction"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Số dư sau giao dịch: 14,500,000 đ"
                        android:textSize="12sp"
                        android:gravity="center"
                        android:textColor="#FF9800"
                        android:visibility="gone" />

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Note Input -->
            <androidx.cardview.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                app:cardCornerRadius="12dp"
                app:cardElevation="4dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="📝 Ghi chú (tùy chọn)"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="#333"
                        android:layout_marginBottom="8dp" />

                    <EditText
                        android:id="@+id/etNote"
                        android:layout_width="match_parent"
                        android:layout_height="48dp"
                        android:background="@drawable/edit_text_background"
                        android:hint="Ví dụ: Tiết kiệm từ lương tháng 12"
                        android:paddingHorizontal="16dp"
                        android:textSize="14sp"
                        android:maxLength="100" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="4dp"
                        android:text="💡 Ghi chú giúp bạn theo dõi nguồn tiền"
                        android:textSize="11sp"
                        android:textColor="#999" />

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Calculation Results -->
            <androidx.cardview.widget.CardView
                android:id="@+id/cardCalculation"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="24dp"
                app:cardCornerRadius="12dp"
                app:cardElevation="4dp"
                app:cardBackgroundColor="#E8F5E8"
                android:visibility="gone">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="📊 Kết quả dự kiến"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="#2E7D32"
                        android:layout_marginBottom="12dp" />

                    <!-- New Progress -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="📈 Tiến độ mới:"
                            android:textSize="14sp"
                            android:textColor="#2E7D32" />

                        <TextView
                            android:id="@+id/tvNewProgress"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="65% (32,500,000 đ)"
                            android:textSize="14sp"
                            android:textStyle="bold"
                            android:textColor="#2E7D32" />

                    </LinearLayout>

                    <!-- Remaining Amount -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="💪 Còn thiếu:"
                            android:textSize="14sp"
                            android:textColor="#2E7D32" />

                        <TextView
                            android:id="@+id/tvRemainingAmount"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="17,500,000 đ"
                            android:textSize="14sp"
                            android:textStyle="bold"
                            android:textColor="#2E7D32" />

                    </LinearLayout>

                    <!-- Achievement Status -->
                    <LinearLayout
                        android:id="@+id/layoutAchievement"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp"
                        android:visibility="gone">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="🎉 Trạng thái:"
                            android:textSize="14sp"
                            android:textColor="#2E7D32" />

                        <TextView
                            android:id="@+id/tvAchievementStatus"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Hoàn thành mục tiêu!"
                            android:textSize="14sp"
                            android:textStyle="bold"
                            android:textColor="#FF8F00" />

                    </LinearLayout>

                    <!-- New Progress Bar -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:layout_marginTop="8dp">

                        <ProgressBar
                            android:id="@+id/progressBarNew"
                            style="?android:attr/progressBarStyleHorizontal"
                            android:layout_width="0dp"
                            android:layout_height="12dp"
                            android:layout_weight="1"
                            android:progress="65"
                            android:max="100"
                            android:progressTint="#4CAF50"
                            android:progressBackgroundTint="#C8E6C9" />

                        <TextView
                            android:id="@+id/tvNewProgressPercent"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginStart="12dp"
                            android:text="65%"
                            android:textSize="12sp"
                            android:textStyle="bold"
                            android:textColor="#4CAF50" />

                    </LinearLayout>

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Action Buttons -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_marginBottom="16dp">

                <Button
                    android:id="@+id/btnCancel"
                    android:layout_width="0dp"
                    android:layout_height="48dp"
                    android:layout_weight="1"
                    android:layout_marginEnd="8dp"
                    android:text="❌ Hủy bỏ"
                    android:textSize="14sp"
                    android:textColor="#666"
                    android:background="@drawable/button_outline_gray"
                    android:backgroundTint="#F5F5F5" />

                <Button
                    android:id="@+id/btnSave"
                    android:layout_width="0dp"
                    android:layout_height="48dp"
                    android:layout_weight="2"
                    android:layout_marginStart="8dp"
                    android:text="💰 Thêm tiền vào mục tiêu"
                    android:textSize="14sp"
                    android:textColor="@android:color/white"
                    android:textStyle="bold"
                    android:background="@drawable/button_primary"
                    android:backgroundTint="#4CAF50"
                    android:enabled="false" />

            </LinearLayout>

            <!-- Tips Card -->
            <androidx.cardview.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                app:cardCornerRadius="12dp"
                app:cardElevation="2dp"
                app:cardBackgroundColor="#FFF3E0">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="💡 Lời khuyên"
                        android:textSize="14sp"
                        android:textStyle="bold"
                        android:textColor="#F57C00"
                        android:layout_marginBottom="8dp" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="• Thêm tiền thường xuyên, dù là số tiền nhỏ\n• Ghi chú nguồn tiền để theo dõi dễ dàng\n• Đặt lịch nhắc để không quên tiết kiệm\n• Ăn mừng khi đạt được các cột mốc quan trọng"
                        android:textSize="12sp"
                        android:textColor="#E65100"
                        android:lineSpacingExtra="2dp" />

                </LinearLayout>

            </androidx.cardview.widget.CardView>

        </LinearLayout>

    </LinearLayout>

</ScrollView>