<?xml version="1.0" encoding="utf-8"?>
<!-- activity_budget_list.xml -->
<androidx.swiperefreshlayout.widget.SwipeRefreshLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/swipe_refresh_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.core.widget.NestedScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="
#F8F9FA"
        android:fillViewport="true">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <!-- Header với Back Button và Title - FULL WIDTH -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="66dp"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:background="@drawable/header_gradient_background"
                android:paddingStart="16dp"
                android:paddingEnd="16dp"
                android:elevation="8dp">

                <!-- Back Button -->
                <ImageView
                    android:id="@+id/iv_back_button"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:src="@drawable/ic_arrow_back_white"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:padding="12dp"
                    android:layout_marginTop="8dp"
                    android:layout_marginEnd="16dp"
                    android:contentDescription="Back"
                    android:clickable="true"
                    android:focusable="true"
                    android:onClick="onBackClick" />

                <!-- Title -->
                <TextView
                    android:id="@+id/tv_header_title"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:layout_marginTop="8dp"
                    android:text="Ngân Sách Thông Minh"
                    android:textColor="@android:color/white"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <!-- Add Budget Button -->
                <ImageView
                    android:id="@+id/iv_add_budget"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:src="@drawable/ic_add"
                    app:tint="@android:color/white"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:padding="12dp"
                    android:layout_marginTop="8dp"
                    android:contentDescription="Add Budget"
                    android:clickable="true"
                    android:focusable="true" />

            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <!-- Welcome Section -->
                <androidx.cardview.widget.CardView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="20dp"
                    app:cardCornerRadius="20dp"
                    app:cardElevation="6dp"
                    app:cardBackgroundColor="#FFFFFF">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:padding="20dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical">

                            <LinearLayout
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:orientation="vertical">

                                <TextView
                                    android:id="@+id/tv_welcome_title"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Chào buổi sáng! 🌅"
                                    android:textSize="18sp"
                                    android:textStyle="bold"
                                    android:textColor="#333333" />

                                <TextView
                                    android:id="@+id/tv_welcome_subtitle"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="4dp"
                                    android:text="Hôm nay bạn có kế hoạch chi tiêu gì?"
                                    android:textColor="#666666"
                                    android:textSize="14sp" />

                            </LinearLayout>

                            <!-- Quick Actions -->
                            <LinearLayout
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:orientation="horizontal">

                                <ImageView
                                    android:id="@+id/iv_notifications"
                                    android:layout_width="40dp"
                                    android:layout_height="40dp"
                                    android:src="@drawable/ic_notifications"
                                    android:background="@drawable/circular_button_background"
                                    android:backgroundTint="#E3F2FD"
                                    android:padding="8dp"
                                    android:layout_marginEnd="8dp"
                                    android:contentDescription="Notifications"
                                    android:clickable="true"
                                    android:focusable="true" />

                                <ImageView
                                    android:id="@+id/iv_settings"
                                    android:layout_width="40dp"
                                    android:layout_height="40dp"
                                    android:src="@drawable/ic_settings"
                                    android:background="@drawable/circular_button_background"
                                    android:backgroundTint="#E8F5E8"
                                    android:padding="8dp"
                                    android:contentDescription="Settings"
                                    android:clickable="true"
                                    android:focusable="true" />

                            </LinearLayout>

                        </LinearLayout>

                        <!-- Quick Stats -->
                        <LinearLayout
                            android:id="@+id/layout_quick_stats"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:layout_marginTop="16dp"
                            android:background="@drawable/rounded_background_light"
                            android:padding="12dp"
                            android:visibility="gone">

                            <LinearLayout
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:orientation="vertical"
                                android:gravity="center">

                                <TextView
                                    android:id="@+id/tv_total_budgets"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="5"
                                    android:textSize="20sp"
                                    android:textStyle="bold"
                                    android:textColor="
#1976D2" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Kế hoạch"
                                    android:textSize="12sp"
                                    android:textColor="
#666666" />

                            </LinearLayout>

                            <View
                                android:layout_width="1dp"
                                android:layout_height="40dp"
                                android:background="
#E0E0E0" />

                            <LinearLayout
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:orientation="vertical"
                                android:gravity="center">

                                <TextView
                                    android:id="@+id/tv_active_budgets"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="3"
                                    android:textSize="20sp"
                                    android:textStyle="bold"
                                    android:textColor="
#4CAF50" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Đang hoạt động"
                                    android:textSize="12sp"
                                    android:textColor="
#666666" />

                            </LinearLayout>

                            <View
                                android:layout_width="1dp"
                                android:layout_height="40dp"
                                android:background="
#E0E0E0" />

                            <LinearLayout
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:orientation="vertical"
                                android:gravity="center">

                                <TextView
                                    android:id="@+id/tv_total_amount"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="15M"
                                    android:textSize="20sp"
                                    android:textStyle="bold"
                                    android:textColor="
#FF9800" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Tổng ngân sách"
                                    android:textSize="12sp"
                                    android:textColor="
#666666" />

                            </LinearLayout>

                        </LinearLayout>

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <!-- Search and Filter Section -->
                <androidx.cardview.widget.CardView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    app:cardCornerRadius="16dp"
                    app:cardElevation="4dp"
                    app:cardBackgroundColor="#FFFFFF">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:padding="16dp">

                        <!-- Search Bar -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="48dp"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:background="@drawable/rounded_background_light"
                            android:padding="12dp"
                            android:layout_marginBottom="12dp">

                            <ImageView
                                android:layout_width="20dp"
                                android:layout_height="20dp"
                                android:src="@drawable/ic_search"
                                app:tint="#666666"
                                android:layout_marginEnd="8dp" />

                            <EditText
                                android:id="@+id/et_search_budget"
                                android:layout_width="0dp"
                                android:layout_height="match_parent"
                                android:layout_weight="1"
                                android:background="@android:color/transparent"
                                android:hint="Tìm kiếm ngân sách..."
                                android:textSize="14sp"
                                android:textColor="
#333333"
                                android:textColorHint="
#999999"
                                android:inputType="text"
                                android:maxLines="1" />

                            <ImageView
                                android:id="@+id/iv_clear_search"
                                android:layout_width="20dp"
                                android:layout_height="20dp"
                                android:src="@drawable/ic_clear"
                                app:tint="#666666"
                                android:background="?attr/selectableItemBackgroundBorderless"
                                android:visibility="gone"
                                android:clickable="true"
                                android:focusable="true" />

                        </LinearLayout>

                        <!-- Filter Tabs -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal">

                            <Button
                                android:id="@+id/btn_filter_all"
                                android:layout_width="0dp"
                                android:layout_height="36dp"
                                android:layout_weight="1"
                                android:text="Tất cả"
                                android:textSize="12sp"
                                android:layout_marginEnd="4dp"
                                android:background="@drawable/tab_button_selected" />

                            <Button
                                android:id="@+id/btn_filter_active"
                                android:layout_width="0dp"
                                android:layout_height="36dp"
                                android:layout_weight="1"
                                android:text="Đang hoạt động"
                                android:textSize="12sp"
                                android:layout_marginStart="4dp"
                                android:layout_marginEnd="4dp"
                                android:background="@drawable/tab_button_normal" />

                            <Button
                                android:id="@+id/btn_filter_ended"
                                android:layout_width="0dp"
                                android:layout_height="36dp"
                                android:layout_weight="1"
                                android:text="Kết thúc"
                                android:textSize="12sp"
                                android:layout_marginStart="4dp"
                                android:background="@drawable/tab_button_normal" />

                        </LinearLayout>

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <!-- Budget List Section -->
                <androidx.cardview.widget.CardView
                    android:id="@+id/card_budget_list"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    app:cardCornerRadius="16dp"
                    app:cardElevation="4dp"
                    app:cardBackgroundColor="#FFFFFF"
                    android:visibility="gone">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:padding="20dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginBottom="16dp">

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:text="📋 Danh Sách Ngân Sách"
                                android:textSize="18sp"
                                android:textStyle="bold"
                                android:textColor="#1976D2" />

                            <!-- Sort Options -->
                            <ImageView
                                android:id="@+id/iv_sort_budgets"
                                android:layout_width="32dp"
                                android:layout_height="32dp"
                                android:src="@drawable/ic_sort"
                                android:background="?attr/selectableItemBackgroundBorderless"
                                android:padding="6dp"
                                android:contentDescription="Sort budgets"
                                android:clickable="true"
                                android:focusable="true" />

                        </LinearLayout>

                        <androidx.recyclerview.widget.RecyclerView
                            android:id="@+id/rv_budget_list"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:nestedScrollingEnabled="false"
                            tools:listitem="@layout/item_budget_card" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <!-- No Data State -->
                <LinearLayout
                    android:id="@+id/layout_no_data"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="50dp"
                    android:gravity="center"
                    android:orientation="vertical"
                    android:padding="40dp"
                    android:visibility="visible">

                    <ImageView
                        android:id="@+id/iv_empty_state_icon"
                        android:layout_width="120dp"
                        android:layout_height="120dp"
                        android:layout_marginBottom="24dp"
                        android:contentDescription="No budget data"
                        android:src="@drawable/ic_empty_budget" />

                    <TextView
                        android:id="@+id/tv_empty_state_title"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="12dp"
                        android:gravity="center"
                        android:text="💰 Chưa có ngân sách nào"
                        android:textColor="#333333"
                        android:textSize="22sp"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/tv_empty_state_message"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="32dp"
                        android:gravity="center"
                        android:lineSpacingExtra="4dp"
                        android:text="Tạo ngân sách đầu tiên để bắt đầu quản lý tài chính thông minh. Chúng tôi sẽ giúp bạn theo dõi chi tiêu và đạt được mục tiêu tài chính!"
                        android:textColor="#666666"
                        android:textSize="16sp" />

                    <Button
                        android:id="@+id/btn_create_first_budget"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:background="@drawable/rounded_button_primary"
                        android:elevation="4dp"
                        android:paddingStart="32dp"
                        android:paddingTop="16dp"
                        android:paddingEnd="32dp"
                        android:paddingBottom="16dp"
                        android:text="🚀 Tạo ngân sách đầu tiên"
                        android:textColor="@android:color/white"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                </LinearLayout>

                <!-- Quick Actions FAB-style buttons when has data -->
                <LinearLayout
                    android:id="@+id/layout_quick_actions"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:layout_marginTop="20dp"
                    android:visibility="gone">

                    <androidx.cardview.widget.CardView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:layout_marginEnd="8dp"
                        app:cardCornerRadius="16dp"
                        app:cardElevation="4dp"
                        app:cardBackgroundColor="#4CAF50">

                        <LinearLayout
                            android:id="@+id/btn_create_new_budget"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center"
                            android:padding="16dp"
                            android:background="?attr/selectableItemBackground"
                            android:clickable="true"
                            android:focusable="true">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="➕"
                                android:textSize="18sp"
                                android:layout_marginEnd="8dp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Tạo mới"
                                android:textColor="@android:color/white"
                                android:textSize="14sp"
                                android:textStyle="bold" />

                        </LinearLayout>

                    </androidx.cardview.widget.CardView>

                    <androidx.cardview.widget.CardView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:layout_marginStart="8dp"
                        app:cardCornerRadius="16dp"
                        app:cardElevation="4dp"
                        app:cardBackgroundColor="#2196F3">

                        <LinearLayout
                            android:id="@+id/btn_budget_analytics"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center"
                            android:padding="16dp"
                            android:background="?attr/selectableItemBackground"
                            android:clickable="true"
                            android:focusable="true">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="📊"
                                android:textSize="18sp"
                                android:layout_marginEnd="8dp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Thống kê"
                                android:textColor="@android:color/white"
                                android:textSize="14sp"
                                android:textStyle="bold" />

                        </LinearLayout>

                    </androidx.cardview.widget.CardView>

                </LinearLayout>

                <!-- Bottom Padding -->
                <View
                    android:layout_width="match_parent"
                    android:layout_height="20dp" />

            </LinearLayout>

        </LinearLayout>

    </androidx.core.widget.NestedScrollView>

</androidx.swiperefreshlayout.widget.SwipeRefreshLayout>